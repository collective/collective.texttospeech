var MainView = (function() {  function MainView() {    var self = this;    self.$el = $('#viewlet-texttospeech');    self.$el.data('main', self);    self.template = "<input id=\"texttospeech-button\" type=\"button\" value=\"Play\" />";    self.playing = false;    self.paused = true;    self.render();    self.$button.on('click', self.play_pause);  }  MainView.prototype.render = function() {    var self = this;    self.$el.html(self.template);    self.$button = $('#texttospeech-button', self.$el);  };  MainView.prototype.onstart = function() {    var self = $('#viewlet-texttospeech').data('main');    self.playing = true;    self.paused = false;    self.$button.attr('value', 'Pause');  };  MainView.prototype.onend = function() {    var self = $('#viewlet-texttospeech').data('main');    self.playing = false;    self.paused = true;    self.$button.attr('value', 'Play');  };  MainView.prototype.play_pause = function(e) {    e.preventDefault();    var self = $('#viewlet-texttospeech').data('main');    if (self.playing) {      if (self.paused) {        self.paused = false;        self.$button.attr('value', 'Pause');        responsiveVoice.resume();      } else {        self.paused = true;        self.$button.attr('value', 'Play');        responsiveVoice.pause();      }    } else {      responsiveVoice.speak(        $('#content').text(),        self.$el.attr('data-voice'), {          onstart: self.onstart,          onend: self.onend        }      );    }  };  return MainView;})();var ControlPanelView = (function() {  function ControlPanelView() {    var self = this;    self.template = "<select id=\"form-widgets-voice\" name=\"form.widgets.voice\" class=\"text-widget required textline-field\">\n</select>";    self.actual_voice = $('#form-widgets-voice').val();    self.render();  }  ControlPanelView.prototype.render = function() {    var self = this;    $('#form-widgets-voice').replaceWith(self.template);    var voicelist = responsiveVoice.getVoices();    var vselect = $('#form-widgets-voice');    var i, len, voice;    for (i = 0, len = voicelist.length; i < len; i++) {      voice = voicelist[i];      if (voice.name === self.actual_voice) {        vselect.append($('<option selected="selected" />').val(voice.name).text(voice.name));      } else {        vselect.append($('<option />').val(voice.name).text(voice.name));      }    }  };  return ControlPanelView;})();$(function() {  if ($('#viewlet-texttospeech').length > 0) {    new MainView();  }  if ($('body.template-texttospeech-settings').length > 0) {    new ControlPanelView();  }});